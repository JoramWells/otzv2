FROM node:22-alpine

# ARG NODE_ENV

# ENV NODE_ENV ${NODE_ENV}

WORKDIR /app

COPY package.json yarn.lock ./

RUN yarn install --frozen-lockfile

COPY . .


RUN yarn run build

# FROM node:22-alpine AS runtime

# WORKDIR /app

# COPY --from=build /app/.next /app/.next
# COPY --from=build /app/public /app/public
# COPY --from=build /app/node_modules /app/node_modules
# COPY --from=build /app/package.json /app/
# COPY --from=build /app/yarn.lock /app/

CMD ["npm","start"]